#  SQLD

### ▷ 데이터 모델의 이해 

1. 데이터 모델링에서 데이터독립성의 이해

- 데이터독립성의 필요성
  - 유지보수 비용 절감
  - 데이터 복잡도 ↓
  - 중독 데이터 ↓
  - 각 view의 독립성을 유지하고 계층별 view에 영향을 주지 않고 변경 가능
  - 단계별 schema에 따라 데이터 정의어(DDL)와 데이터 조작어(DML)가 다름을 제공
- 데이터베이스 3단계 구조
  - 외부단계 :  사용자와 가까운 단계, 공통적인 사항을 처리하는 통합된 뷰를 스키마 구조를 디자인한 형태
  - 개념적 단계
  - 내부적 단계 : 데이터가 물리적으로 저장된 방법에 대한 스키마 구조
- 데이터독립성 요소
  - 외부스키마
    - view 단계, 여러개의 사용자 관점으로 구성
    - 개인적 DB 스키마
  - 개념스키마
    - 개념단계, 하나의 개념적 스키마로 구성 모든 사용자 관점을 통합한 조직 전체의 DB를 기술하는 것
    - DB에 저장되는 데이터와 그들간의 관계를 표현하는 스키마
    - 통합관점
  - 내부스키마
    - 내부단계, 내부스키마로 구성
    - DB가 물리적으로 저장된 형식
    - 물리적 장치에서 데이터가 실제적으로 저장되는 방법을 표현하는 스키마
- 두 영역의 데이터 독립성
  - 논리적 독립성
    - 개념 스키마가 변경되어도 외부 스키마에는 영향을 미치지 않도록 지원
    - 논리적 구조가 변경되어도 응용 프로그램 영향 X
    - 사용자 특성에 맞게 변경가능
    - 통합구조 변경가능
  - 물리적 독립성
    - 내부 스키마가 변경 되어도 외부/내부 스키마는 영향을 미치지 않도록 지원
    - 저장장치의 구조변경은 응용프로그램과 개념 스키마에 영향 X
    - 물리적 구조 영향 없이 개념구조 변경 가능
    - 개념구조 영향없이 물리적인 구조 변경가능
- 사상(Mapping)
  - 상호 독립적인 개념을 연결시켜주는 다리 
  - 외부적/ 개념적사상( 논리적 사상)
    - 외부적 뷰와 개념적 뷰의 상호관련성을 정의함 
    - 사용자가 접근하는 형식에 따라 다른 타입의 필드를 가질 수 없음
    - 개념적 뷰의 필드 타입은 변화가 없음
  - 개념적/ 내부적사상 (물리적 사상)
    - 개념적 뷰와 저장된 데이터베이스의 상호관련성 정의 
    - DB구조가 바뀐다면 개념적/ 내부적사상이 바뀌어야함 -> 개념적 스키마가 그대로 남아있게 됨
  - 독립성 보장하기 위해서는 사상을 하는 스크립트(DDL)를 DBA가 필요할 때마다 변경해야하 ㅁ
  - 각 단계의 독립성을 보장하기 위해 변경사항이 발생했을 때 DBA가 적절하게 작업을 해주기 때문에 독립성이 보장됨

2. 데이터 모델리의 중요한 세 가지 개념

- 데이터 모델링의 세 가지 요소

  - 업무가 관여하는 어떤 것 (Things)
  - 어떤 것이 가지는 성격(Attributes)
  - 업무가 관여하는 어떤 것 간의 관계(Relationships)

- 단수와 집합(복수)의 명명

  | 개념                                               | 복수/ 집합개념 <br />타입/ 클래스            | 개별/단수개념<br />어커런스/ 인스턴스                        |
  | -------------------------------------------------- | -------------------------------------------- | ------------------------------------------------------------ |
  | 어떤 것 (Thing)                                    | 엔터티 타입(Entity Type)<br />엔터티(Entity) | 엔터티(Entity)<br />인스턴스(Instance), 어커런스(Occurrence) |
  | 어떤 것간의 연관<br />(Association between Things) | 관계(Relationship)                           | 페어링(Pairing)                                              |
  | 어떤 것의 성격<br />(Characteristic of a Thing)    | 속성(Attribute)                              | 속성값(Attribute Value)                                      |

  

3. 데이터 모델의 표기법인 ERD의 이해

- ERD(Entity Relationship Diagram) 표기법을 이용하여 모델링하는 방법
  - ERD - 각 업무분석에서 도출된 엔터티와 엔터티간의 관계를 이해하기 쉽게 도식화된 다이어그램으로 표시하는 방법
  - ERD 작업 순서
    - 엔터티를 그린다.
    - 엔터티를 적절하게 배치한다.
    - 엔터티간 관계를 설정한다.
    - 관계명을 기술한다.
    - 관계의 참여도를 기술한다.
    - 관계의 필수여부를 기술한다.

4. 좋은 데이터 모델의 요소

- 완전성(Completeness) : 업무에 필요로 하는 모든 데이터가 데이터 모델에 정의되어 있어야 한다.
- 중복배제 (Non-Redundancy) : 하나의 DB 내에 동일한 사실은 반드시 한 번만 기록
- 업무규칙 (Business Rules) : 데이터 모델링 과정에서 도출되고 규명되는 수많은 업무규칙을 데이터 모델에 표현 하고 데이터모델을 활용하는 모든 사용자가 공유할 수 있도록 제공하는 것
- 데이터 재사용 (Data Reusability) : 데이터가 독립적으로 설계되어야 데이터 재사용성을 향상실킬 수 있다.
- 의사소통 (Communication) 
- 통합성(Integration)



### ▷ 엔터티 (Entity)

1. 엔터티의 개념
   - 실체, 객체 
   - 사람, 장소, 물건, 사건, 개념 등의 명사에 해당
   - 업무상 관리가 필요한 관심사
   - 저장이 되기 위한 어떤 것
2. 엔터티의 특징

- 업무에서 필요로 하는 정보
  - 반드시 시스템을 구축하고자 하는 업무에서 필요로 하고 관리하고자 하는 정보여야 함
- 식별이 가능해야 함
  - 식별자에 의해 식별이 가능해야 함 
  - 유일한 식별자는 그 엔터티의 인스턴스만의 고유한 이름, 두 개 이상의 엔터티를 대변하면 그 식별자는 잘못 설계된 것
- 인스턴스의 집합
  - 영속적으로 존재하는 인스터스의 집합
- 업무프로세스에 의해 이용
  - 업무프로세스가 그 엔터티를 반드시 이용해야 함 
  - 이용X-> 업무 분석이 정확하게 X, 엔터티 잘못 선정 or 업무프로세스 도출이 적절하게 이루어지지 X
- 속성을 포함 
  - 반드시 속성을 포함되어야 함
  - 속성 포함 X 경우 -> 업무분석이 미진하여 속성정보가 누락된 경우에 해당
  - 단, 예외적으로 관계엔터티의 경우는 주식별자 속성만 가지고 있어도 엔터티로 인정
- 관계의 존재
  - 엔터티는 다른 엔터티와 최소 한 개 이상의 관계가 존재해야 함
  - 관계를 생략하여 표현해야하는 경우
    - 통계를 위한 엔터티 
    - 코드를 위한 엔터티
    - 시스템 처리시 내부 필요에 의한 엔터티

4. 엔터티의 분류

- 유무형에 따른 분류 
  - 유형엔터티 : 물리적인 형태, 안정적, 엔터티를 구분하기 가장 용이
  - 개념엔터티 : 물리적인 형태 존재X
  - 사건엔터티 : 업무를 수행함에 따라 발생되는 엔터티, 통계자료에 이용
- 발생시점에 따른 분류
  - 기본엔터티 : 독립적으로 생성 가능, 타 엔터티의 부모의 역할, 자신의 고유한 주식별자를 가짐
  - 중심엔터티 : 기본엔터티로부터 발생, 중심적 역할, 데이터 양이 많이 발생, 다른 엔터이와으이 관계를 통해 행위엔터티를 생성
  - 행위엔터티 : 두 개 이상의 부모엔터티로부터 발생, 자주 내용이 바뀌거나 데이터량이 증가, 상세 설계단계나 프로세스와 상관 모델링을 진행하면서 도출 될 수 있음

5. 엔터티의 명명
   - 가능하면 현업업무에서 사용하는 용어를 사용
   - 가능하면 약어 사용X
   - 단수명사를 사용
   - 모든 엔터티에서 유일하게 이름이 부여되어야 함
   - 엔터티 생성의미대로 이름을 부여

### ▷ 속성 (Attribute)

1. 속성의 개념
   - 사물의 성질, 특징 또는 본질적인 성질
   - 업무에서 필요로 하는 인스턴스로 관리하고자 하는 의미상 더 이상 분리되지 않는 최소의 데이터 단위
   - 업무에서 필요로 한다.
   - 의미상 더 이상 분리되지 않는다.
   - 엔터티를 설명하고 인스턴스의 구성요소가 된다.
2. 엔터티, 인스턴스와 속성, 속성값에 대한 내용과 표기법

- 엔터티, 인스턴스, 속성, 속성값의 관계
  - 한 개의 엔터티는 두 개 이상의 인스턴스의 집합이어야 한다.
  - 한 개의 엔터티는 두 개 이상의 속성을 갖는다.
  - 한 개의 속성은 한 개의 속성값을 갖는다.

3. 속성의 특징
   - 엔터티와 마찬가지로 반드시 해당 업무에서 필요하고 관리하고자 하는 정보여야 함
   - 정규화 이론에 근간하여 정해진 주식별자에 함수적 종속성을 가져야 함
   - 하나의 속성에는 한 개의 값만 가짐. 

4. 속성의 분류

- 속성의 특성에 따른 분류
  - 기본속성 : 업무로부터 추출한 모든 속성, 가장 일반적이고 많은 속성을 차지
  - 설계속성 : 업무상 필요한 데이터 이외에 데이터 모델링을 위해 업무를 규칙화하기 위해 속성을 새로 만들거나 변형하여 정의하는 속성 , 코드성속성, 일련번호와 같은 속성
  - 파생속성 : 다른 속성에 영향을 받아 발생하는 속성 

- 엔터티 구성방식에 따른 분류
  - PK(Primary Key) 속성 : 엔터티를 식별할 수 있는 속성
  - FK(Foreign Key) 속성 : 다른 엔터티와의 관계에서 포함된 속성
  - 일반 속성 : PK ,FK 에 포함되지 않은 속성
  - 복합 속성 : ex) 주소 속성 - 시, 구, 동, 번지 (같은 여러 세부속성들로 구성)
  - 단순 속성 : ex) 나이,성별 ( 더 이상 다른 속성들로 구성될 수 없는 단순한 속성)
  - 일반적으로 속성은 하나의 값을 가지고 있음 
    - 속성 하나에 한 개의 값 - 단일 값 ex) 주문번호
    - 여러개의 값 - 다중값 ex) 전화번호, 집전화, 회사전화

5. 도메인(Domain)
   - 각 속성을 가질 수 있는 값의 범위가 있는데 이를 그 속성의 도메인이라 한다.
   - 엔터티 내에서 속성에 대한 데이터타입과 크기 그리고 제약사항을 지정하는 것
6. 속성의 명명(Naming)
   - 행당업무에 사용하는 이름 부여
   - 서술식 속성명을 사용 X
   - 약어상용 가급적 제한
   - 전체 데이터 모델에서 유일성 확보하는 것이 좋다.



### ▷ 관계 (Realtionship)

1. 관계의 개념

- 관계의 정의 
  - 상호 연관성이 있는 상태
  - 엔터이의 인스터스 사이의 논리적인 연관성으로 존재의 형태로서나 행위로서 서로에게 연관성이 부여된 상태 
- 관계의 페어링
  - 엔터티 안에 인스턴스가 개별적으로 관계를 가지는 것 (페어링) -> 이것의 집합을 관계로 표현

2. 관계의 분류

   - 존재적 관계
   - 행위적 관계

   - 연관관계 : 항상 이용하는 관계 , 존재적관계
   - 의존관계 : 상대방 클래스의 행위에 의해 관계가 형성될 때 구분하여 표현

3. 관계의 표기법

- 관계명 (Membership)

  - 관계의 이름 
  - 엔터티에서 관계가 시작되는 편 -  관계시작점
  - 부르고 받는 편- 관계끝점
  - 애매한 동사 X
  - 현재형으로 표현

- 관계차수(Degree/Cardinality)

  - 두 개의 엔터티간 관계에서 참여자의 수를 표현
  - 1:1 (one to one) 관계
    - 하나의 관계만 가지고 있다.
  - 1:M (one to many) 관계
    - 하나나 그 이상의 수와 관계를 가짐, 그 반대의 방향은 단지 하나만의 관계를 가짐
  - M:M (many to many)관계
    - 하나 또는 그 이상의 수와 관계를 가짐
    -  두 개의 주식별자를 상속받은 관계엔터티를 이용하여 3개의 엔터티로 구분하여 표현

- 관계선택사양(Optionality)

  - 관계를 통한 상대방과의 업무적인 제약조건을 표현하는 것

  - 필수참여관계 (Mandatory) : 참여하는 모든 참여자가 반드시 관계를 가지는 타 엔터티의 참여자와 연결이 되어야 하는 관계
  - 선택참여관계 (Optional) : 물리속성에서 FK로 연결 될 경우 null을 허용할 수 있는 항목

4. 관계의 정의 및 읽는 방법
   - 관계 체크사항  
     - 두 개의 엔터티 사이에 관심있는 연관규칙이 존재하는가? 
     -  두 개의 엔터티 사이에 정보의 조합이 발생되는가? 
     - 업무기술서 장표에 관계연결에 대한 규칙이 서술되어 있는가 ? 
     - 업무기술서 장표에 관계연결을 가능하게 하는 동사 (Verb) 가 있는가?

- 관계읽기
  - 기준 엔터티를 한 개 또는 각으로 읽는다.
  - 대상 엔터티의 관계참여도 즉 개수를 읽는다.
  - 관계선택사양과 관계명을 읽는다.

### ▷ 식별자

1. 식별자 (Identifiers) 개념
   - 하나의 엔터이에 구성되어 있는 여러 개의 속성 중에 엔터티를 대표 할 수 있는 속성을 의미
   - 하나의 엔터티는 반드시 하나의 유일한 식별자가 존재
2. 식별자의 특징

- 주식별자
  - 유일성 : 주식별자에 의해 엔터티내에 모든 인스턴스들을 유일하게 구분
  - 최소성 : 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야함 
  - 불변성 : 주식별자가 한 번 특징 엔터티에 지정되면 그 식별자의 값은 변하지 않아야함 
  - 존재성 : 주식별자가 지정되면 반드시 데이터 값이 존재 (null X)
- 대체식별자
  - 주식별자의 특징과 일치
- 외부식별자
  - 주식별자의 특징과 일치 X , 참조무결성 제약조건에 따른 특징



3. 식별자 분류 및 표기법

- 식별자 분류

  - 대표성여부

    - 주식별자 : 엔터티 내에서 각 어커런스를 구분 할 수 있는 구분자, 타 엔터티와 참조관계를 연결할 수 있는 식별자
    - 보조식별자 : 엔터티 내에서 각 어커런스를 구분 할 수 있는 구분자이나 대표성을 가지지 못해 참조관계 연결 X

  - 스스로 생성 여부

    - 내부식별자 : 엔터티 내부에서 스스로 만들어지는 식별자
    - 외부식별자 : 타 엔터티와의 관계를 통해 타 엔터티로부터 받아오는 식별자 

  - 단일 속성 여부

    - 단일식별자 : 하나의 속성으로 구성된 식별자
    - 복합식별자 : 둘 이상의 속성으로 구성된 식별자

  - 대체여부

    - 본질식별자 : 업무에 의해 만들어진 식별자
    - 인조식별자 : 업무적으로 만들어지지는 않지만 원조식별자가 복잡한 구성을 가지고 있기 때무에 인위적으로 만든 식별자


4. 주식별자 도출기준

- 해당 업무에서 자주 이용되는 속성을 주식별자로 지정하도록 함 
- 명칭, 내역 등과 같이 이름으로 기술되는 것은 피함 
- 속성의 수가 많아지지 않도록 함 

5. 식별자관계와 비식별자관계에 따른 식별자

- 식별자와 비식별자관계 비교

  - 식별자관계
    - 목적 : 강한 연결관계 표현
    - 자식 주식별자 영향 : 자식 부식별자의 구성에 포함됨
    - 표기법 : 실선 표현
    - 연결 고려사항 : 반드시 부모엔터티 종속 , 자식 주식별자구성에 부모 주식별자포함 필요, 상속받은 주식별자속성을 타 엔터티에 이전 필요
  - 비식별자관계
    - 목적 : 약한 연결관계 표현
    - 자식 주식별자 영향 : 자식 일반 속성에 포함됨
    - 표기법 : 점선 표현
    - 연결 고려사항 : 약한 종속 관계 , 자식 주식별자구성을 독립적으로 구성, 자식 주식별자구성에 부모 주식별자 부분필요, 상속받은 주식별자속성을 타 엔터이에 차단 필요 , 부모쪽의 관계 참여가 선택관계 

  

